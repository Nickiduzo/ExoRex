# Графический материал

## Требования и стандарты (а также ответы на возможно возникшие вопросы)

Для небольшой мобильной игры можно рассчитать разрешенный размер атласа следующим образом:

\[ [10-20 мб] / [количество спрайт атласов] = [объём на сцену] \]

Где 10 мегабайт - это сильно оптимизированная графика, а 20 мегабайт - всё также оптимизированная, но ещё есть что урезать (в случае активных проектов выяснилось, что каждый спрайт атлас может занимать от 0.9 мб до 1.8 мб, а иногда даже больше, если у текстур потерялось слишком много качества после сжатия). Однако в случае с Unity, он сам сжимает спрайты как нужно (поэтому пункт с сжатием можно пропустить, добавив при этом атлас размером 5-10 мб, чтобы он сам пережимал под нужные ситуации).

- Спрайт-атлас должен быть кратным степени двойки. Это помогает уменьшить накладные расходы на процессор и ускорить процесс отрисовки, а также улучшить качество атласа непосредственно. Большинство графических движков загружает атлас с разрешением 640x410, который для начала разбивается на ширину и высоту, и затем определяется, что больше из них, так как в 512x512 он не поместится. Перепаковка происходит в 1024x1024, и после использования возвращается в исходное разрешение. Это потребует усилий графического процессора/процессора и оперативной памяти. Не стоит забывать, что игра запускается каждый кадр, в то время как последний кадр обрабатывается, а значит, любое понижение производительности работает с коэффициентом 2.5.

- Также атлас жизненно важен из-за того, что некоторые графические процессоры (и мобильные, и ПК) могут не поддерживать отрисовку текстур, которые не являются кратными степени двойки. Это может привести к тому, что некоторые пользователи получат черный экран при запуске игры.

- Формат атласа должен быть либо PNG, PVRTC или WebP. Использование JPEG и BMP не рекомендуется из-за низкой степени сжатия и большого размера файлов.

- Минимизируйте количество текстур: чем меньше текстур используется в игре, тем меньше будет количество запросов на доступ к памяти (как оперативной, так и графической), что в свою очередь уменьшит нагрузку на процессор и повысит производительность игры. Если есть возможность не использовать текстуру, то от нее стоит избавиться. Был случай, когда спрайт-атлас дублировал часть заднего плана для создания псевдоэффекта погружения. Я не стал его добавлять, потому что существуют более оптимальные способы решения задачи, чем дублирование уже имеющихся элементов на сцене. Также есть и противоположная сторона монеты: на сцене было много похожих кругов, но отличающихся по цвету. Если их все заменить одним белым и красить непосредственно с помощью игрового движка, может возникнуть проблема обращения к объекту, что является сложно находимой ошибкой. Поэтому иногда с урезанием можно перестараться.

- Использование меньшего количества цветов: чем меньше цветов используется в текстуре, тем меньше будет размер файла. Поэтому, если возможно, стоит использовать меньше цветов в спрайт-атласе (но только если это возможно).

- Оптимизация расположения спрайтов на текстуре: спрайты должны быть расположены на текстуре таким образом, чтобы минимизировать количество пустого пространства и уменьшить размер текстуры (любое пустое пространство - это нереализованные возможности вашего устройства, которое все равно открывает 2048x2048 изображение). Неучаствующие в анимации объекты можно свободно вращать, но в обратной ситуации (если объект является частью анимации), желательно воздержаться от вращения, либо, если это неизбежно, и из-за расположения на атласе теряется пространство, которое можно реализовать, можно повернуть, но все объекты должны иметь одинаковый накл
